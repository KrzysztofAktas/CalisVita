@using CalisVita.Components.Shared
@using CalisVita.Context
@using CalisVita.Model
@using Microsoft.AspNetCore.Components.Authorization
@inject DatabaseContext DbContext
@inject NavigationManager NavigationManager
@inject WorkoutProvider WorkoutProvider
@inject UserProvider UserProvider
@inject AuthenticationStateProvider AuthStateProvider

@page "/"



<PageTitle>Home</PageTitle>






    @code
    {
    //Get the current day of the week(0 = Sunday, 6 = Saturday)//
    string[] daysOfWeek = new[] { "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" };
    int currentDayIndex = (int)DateTime.Now.DayOfWeek;

    @* private Workout dailyWorkout; *@

    @* protected override async Task OnInitializedAsync() *@
    @* { *@
    @*     var authState = await AuthStateProvider.GetAuthenticationStateAsync(); *@
    @*     var user = authState.User; *@

    @*     if (user.Identity.IsAuthenticated) *@
    @*     { *@
    @*         var userId = user.FindFirst("sub")?.Value; *@
    @*         var userLevel = await UserProvider.GetUserLevelAsync(userId); *@
    @*         var workoutType = WorkoutProvider.GetWorkoutTypeForToday(); *@
    @*         dailyWorkout = await WorkoutProvider.GetDailyWorkoutAsync(workoutType, userLevel); *@
    @*     } *@
    @* } *@

    @* private void StartWorkout() *@
    @* { *@
    @*     *@
    @* } *@
    }




<div class="calendar">
    @for (int i = 0; i < daysOfWeek.Length; i++)
    {
        <div class="day @(i == currentDayIndex ? "highlight" : "")">
            @daysOfWeek[i]
        </div>
    }
</div>



@* <h3>Today's Workout: @dailyWorkout?.WorkoutName</h3> *@
@* <p>Difficulty: @dailyWorkout?.WorkoutLevel</p> *@
@* <button @onclick="StartWorkout">Start Workout</button> *@




<style>
    .calendar-container {
        display: flex;
        align-items: flex-start;
        gap: 20px;
    }

    .calendar {
        position: absolute;
        top: 5;
        left: 5;
        display: flex;
        padding: 10px;
        background-color: white; /* Optional: adds a background color */
        border: 1px solid #ccc; /* Optional: adds a border for visual distinction */
        width: fit-content; /* Adjust width based on content */
    }


    .day {
        padding: 10px;
        width: 60px;
        text-align: center;
        font-weight: bold;
        margin-right: 5px;
    }

    .highlight {
        background-color: lightblue;
        border-radius: 5px;
    }


    .stats-container {
        display: flex;
        gap: 20px;
        margin-top: 20px;
    }

    .stat-card {
        background: #f9f9f9;
        border: 1px solid #ddd;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);
    }

        .stat-card h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .stat-card p {
            font-size: 1.5rem;
            font-weight: bold;
        }


</style>